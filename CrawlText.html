<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crawl Text</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>

    <marquee id="MarqueCotrol1"></marquee>
    <script type="text/javascript">
    var Texts;
    var Control = document.getElementById("MarqueCotrol1");
    var Timer;
    GetText();
    function Update() {
        Control.innerText = Texts.list.join("\u00a0\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 ");
    }
    function GetText() {
        console.log("GetText");
        var Req;
        if ("onload" in new XMLHttpRequest()) {
            Req = new XMLHttpRequest();
        } else {
            Req = new XDomainRequest();
        }

        Req.open("GET", "http://callcenter.front-desk.ca/service/crawl?a=get", true);
        Req.onload = function () {
            var Temp = JSON.parse(Req.responseText);
            if (Texts === undefined) {
                Texts = Temp;
                Update();
            } else {
                if (Texts.list.join("") != Temp.list.join("")) {
                    console.log("Update");
                    Texts = Temp;
                    Update();
                }
            }

        }
        Req.send();
    }
    setInterval(GetText, 20000);

    </script>



</body>
</html>